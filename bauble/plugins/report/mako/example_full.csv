<%
from bauble.plugins.report import filter_isplant
subfamiliad = {
    '': '',
'Arethuseae': 'Epidendroideae',
'Coelogyneae': 'Epidendroideae',
'Cranichideae': 'Orchidoideae',
'Cymbidieae': 'Epidendroideae',
'Cypripedieae': 'Cypripedioideae',
'Dendrobieae': 'Epidendroideae',
'Epidendreae': 'Epídendroideae',
'Maxillarieae': 'Epidendroideae',
'Neottieae': 'Epidendroideae',
'Phragmipedieae': 'Cypripedioideae',
'Polystachyeae': 'Epidendroideae',
'Vandeae': 'Epidendroideae',
'Vanilleae': 'Vanilloideae',
}
tribusd = {
    '': '',
'Bletiinae': 'Arethuseae',
'Coelogyninae': 'Coelogyneae',
'Cranichidinae': 'Cranichideae',
'Spiranthinae': 'Cranichideae',
'Spiranthinae ': 'Cranichideae',
'Catasetinae': 'Cymbidieae',
'Cyrtopodiinae': 'Cymbidieae',
'Eulophiinae': 'Cymbidieae',
'Oncidinae': 'Cymbidieae',
'Paphiopedilinae': 'Cypripedieae',
'Dendrobiinae': 'Dendrobieae',
'Bulbophyllinae': 'Epidendreae',
'Laeliinae': 'Epidendreae',
'Pleurothallidinae': 'Epidendreae',
'Bifrenariinae': 'Maxillarieae',
'Coeliopsidinae': 'Maxillarieae',
'Corallorhiziane': 'Maxillarieae',
'Dichaeinae': 'Maxillarieae',
'Lycastinae': 'Maxillarieae',
'Maxillariinae': 'Maxillarieae',
'Ornithocephalinae': 'Maxillarieae',
'Stanhopeinae': 'Maxillarieae',
'Zygopetalinae': 'Maxillarieae',
'Sobraliinae': 'Neottieae',
'Sobralinae': 'Neottieae',
'Phragmipediinae': 'Phragmipedieae',
'Sobraliinae': 'Polystachyeae',
'Aeridinae': 'Vandeae',
'Angraecinae': 'Vandeae',
'Sarcanthinae': 'Vandeae',
'Vanillinae': 'Vanilleae',
}
subtribusd = {
    '': '',
'Ada': 'Oncidinae',
'Aeranthes': 'Angraecinae',
'Alaticaulia': 'Pleurothallidinae',
'Ancipitia': 'Pleurothallidinae',
'Anguloa': 'Lycastinae',
'Aspasia': 'Oncidinae',
'Bifrenaria': 'Bifrenariinae',
'Bletia': 'Bletiinae',
'Brachtia': 'Oncidinae',
'Brassia': 'Oncidinae',
'Buccella': 'Pleurothallidinae',
'Bulbophyllum': 'Bulbophyllinae',
'Caluera': 'Oncidinae',
'Catasetum': 'Catasetinae',
'Cattleya': 'Laeliinae',
'Caucaea': 'Oncidinae',
'Chaubardiella': 'Zygopetalinae',
'Chondrorhyncha': 'Zygopetalinae',
'Cischweinfia': 'Oncidinae',
'Cochleanthes': 'Oncidinae',
'Cochlioda': 'Oncidinae',
'Coelogyne': 'Coelogyninae',
'Comparettia': 'Oncidinae',
'Coryanthes': 'Stanhopeinae',
'Cyclopogon': 'Spiranthinae',
'Cycnoches': 'Catasetinae',
'Cyrtochilum': 'Oncidinae',
'Cyrtopodium': 'Cyrtopodiinae',
'Dendrobium': 'Dendrobiinae',
'Dichaea': 'Dichaeinae',
'Dimerandra': 'Laeliinae',
'Dipteranthus': 'Ornithocephalinae',
'Dracula': 'Pleurothallidinae',
'Dracuvallia': 'Pleurothallidinae',
'Embreea': 'Stanhopeinae',
'Encyclia': 'Laeliinae',
'Epídendrum': 'Laeliinae',
'Eriopsis': 'Cyrtopodiinae',
'Gastrochilus': 'Aeridinae',
'Gomesa': 'Oncidinae',
'Gongora': 'Stanhopeinae',
'Govenia': 'Corallorhiziane',
'Helcia': 'Oncidinae',
'Homalopetalum': 'Laeliinae',
'Huntleya': 'Zygopetalinae',
'Ionopsis': 'Oncidinae',
'Kefersteinia': 'Zygopetalinae',
'Koellensteinia': 'Zygopetalinae',
'Lepanthes': 'Pleurothallidinae',
'Lockhartia': 'Oncidinae',
'Lycaste': 'Lycastinae',
'Lycomormium': 'Coeliopsidinae',
'Macradenia': 'Oncidinae',
'Macroclinium': 'Oncidinae',
'Masdevallia': 'Pleurothallidinae',
'Maxillaria': 'Maxillariinae',
'Miltonia': 'Oncidinae',
'Miltoniopsis': 'Oncidinae',
'Mormodes': 'Catasetinae',
'Mormolyca': 'Maxillariinae',
'Myoxanthus': 'Pleurothallidinae',
'Notylia': 'Oncidinae',
'Octomeria': 'Pleurothallidinae',
'Odontoglossum': 'Oncidinae',
'Oeceoclades': 'Eulophiinae',
'Oncidium': 'Oncidinae',
'Ornithocephalus': 'Ornithocephalinae',
'Osmoglossum': 'Oncidinae',
'Paphinia': 'Stanhopeinae',
'Paphiopedilum': 'Paphiopedilinae',
'Papilionanthe': 'Aeridinae',
'Peristeria': 'Coeliopsidinae',
'Pescatorea': 'Zygopetalinae',
'Pescatoria': 'Zygopetalinae',
'Phalaenopsis': 'Sarcanthinae',
'Phragmipedium ': 'Phragmipediinae',
'Phragmipedium': 'Phragmipediinae',
'Platystele': 'Pleurothallidinae',
'Plectrophora': 'Oncidinae',
'Pleurothallis': 'Pleurothallidinae',
'Polycycnis': 'Stanhopeinae',
'Polystachya': 'Sobraliinae',
'Ponthieva': 'Cranichidinae',
'Porroglossum': 'Pleurothallidinae',
'Prescottia': 'Cranichidinae',
'Prosthechea': 'Laeliinae',
'Psychopsis': 'Oncidinae',
'Regalia': 'Pleurothallidinae',
'Restrepia': 'Pleurothallidinae',
'Rhynchostele': 'Oncidinae',
'Rodriguezia': 'Oncidinae',
'Rudolfiella': 'Bifrenariinae',
'Sarcochilus': 'Aeridinae',
'Scaphosepalum': 'Pleurothallidinae',
'Schomburgkia': 'Laeliinae',
'Scuticaria': 'Maxillariinae',
'Sievekingia': 'Stanhopeinae',
'Sigmatostalix': 'Oncidinae',
'Sobralia': 'Sobraliinae',
'Solenidium': 'Oncidinae',
'Spilotantha': 'Pleurothallidinae',
'Stanhopea': 'Stanhopeinae',
'Stelis': 'Pleurothallidinae',
'Stenia': 'Zygopetalinae',
'Stenorrhynchos': 'Spiranthinae',
'Sudamerlycaste': 'Lycastinae',
'Symphyglossum': 'Oncidinae',
'Teuscheria': 'Bifrenariinae',
'Trichocentrum': 'Oncidinae',
'Trichopilia': 'Oncidinae',
'Trigonidium': 'Maxillariinae',
'Vanda': 'Sarcanthinae',
'Vanilla': 'Vanillinae',
'Xylobium': 'Bifrenariinae',
'Zelenkoa': 'Oncidinae',
}
%>Item	Familia	Subfamilia	Tribu	Subtribu	Genero	Especie	Autor	Fecha registro	CITES	Condición	Conservación	Documento de ingreso	Número de Doc.	Ubicación	Situación	Habito
% for v in filter_isplant(values):
<%
    genus = v.accession.species.genus.genus
    if genus.startswith('Zzz-'):
        genus = ''
    species_epithet = v.accession.species.sp
    if species_epithet == 'sp':
        species_epithet = ''
    subtribus = subtribusd.get(genus, '')
    cites = v.accession.species.cites or ''
    doc_number = ([n.note for n in v.accession.notes if n.category == 'factura'] + [''])[0]
    if doc_number != '':
        doc_type = 'factura'
    else:
        doc_type = ''
%>${v}	${v.accession.species.genus.family}	${subfamiliad[tribusd[subtribus]]}	${tribusd[subtribus]}	${subtribus}	${genus}	${species_epithet}	${v.accession.species.sp_author}	${v.accession._created.isoformat()[:10]}	${cites}			${doc_type}	${doc_number}	${v.location.code}		${v.accession.species.habit or ''}
% endfor
